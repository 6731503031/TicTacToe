<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Itim&display=swap" rel="stylesheet">
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <script src="./index.js"></script>
    <title>Tic-Tac-Toe</title>
</head>

<body>
    <main class="background">
        <section class="title">
            <h1>Tic Tac Toe</h1>
        </section>
        <section class="display">
            Player <span class="display-player playerX">X</span>'s turn
        </section>
        <div class="login-controls">
            <button id="btnLogIn" class="button">Log In with LINE</button>
            <button id="btnLogOut" class="button" style="display:none;">Log Out</button>
        </div>
        <section class="container">
            <div class="tile"></div>
            <div class="tile"></div>
            <div class="tile"></div>
            <div class="tile"></div>
            <div class="tile"></div>
            <div class="tile"></div>
            <div class="tile"></div>
            <div class="tile"></div>
            <div class="tile"></div>
        </section>
        <section class="display announcer hide"></section>
        <section class="controls">
            <button id="reset">Reset</button>
            <button id="toggle-mode" class="toggle-mode">Mode: Player vs AI</button>
        </section>
        <select id="difficulty-select" class="difficulty-select">
            <option value="Easy">Easy</option>
            <option value="Medium">Medium</option>
            <option value="Hard" selected>Hard</option>
        </select>
        <script>
        const btnLogIn = document.getElementById("btnLogIn");
            const btnLogOut = document.getElementById("btnLogOut");

            document.addEventListener("DOMContentLoaded", async () => {
                await liff.init({ liffId: "2007866055-KVkZeq0J" });

                if (!liff.isInClient()) {
                    if (liff.isLoggedIn()) {
                        btnLogIn.style.display = "none";
                        btnLogOut.style.display = "block";

                        const profile = await liff.getProfile();
                        const title = document.querySelector(".title h1");
                        if (title && profile.displayName) {
                            title.innerText = `Tic Tac Toe - Hello, ${profile.displayName}!`;
                        }
                    } else {
                        btnLogIn.style.display = "block";
                        btnLogOut.style.display = "none";
                    }

                    btnLogIn.onclick = () => {
                        liff.login();
                    };

                    btnLogOut.onclick = () => {
                        liff.logout();
                        window.location.reload();
                    };
                } else {
                    btnLogIn.style.display = "none";
                    btnLogOut.style.display = "none";
                }
            });</script>
        <script src="script.js"></script>
    </main>
</body>

</html>